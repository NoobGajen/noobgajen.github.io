(()=>{document.addEventListener("DOMContentLoaded",function(){const o=document.querySelector(".sidebar"),a=document.querySelector(".mobile-menu-btn"),r=document.querySelector(".mobile-close-btn");a.addEventListener("click",()=>{o.classList.toggle("mobile-open")}),r.addEventListener("click",()=>{o.classList.toggle("mobile-open")});const c=document.getElementById("post-content"),l=document.querySelector(".post-single");l&&(c.style.display="block");const n=document.getElementById("scrollToTop");if(!n)return;window.addEventListener("scroll",()=>{window.scrollY>300?n.classList.add("show"):n.classList.remove("show")}),n.addEventListener("click",()=>{window.scrollTo({top:0,behavior:"smooth"})});const i=document.querySelector(".post-single .post-content");if(!i)return;const e=document.createElement("div");e.style.position="fixed",e.style.top=0,e.style.left=0,e.style.width="100%",e.style.height="100%",e.style.backgroundColor="rgba(0, 0, 0, 0.8)",e.style.display="flex",e.style.justifyContent="center",e.style.alignItems="center",e.style.cursor="zoom-out",e.style.zIndex="9999",e.style.transition="opacity 0.25s ease",e.style.opacity="0",e.style.pointerEvents="none";const t=document.createElement("img");t.style.maxWidth="90%",t.style.maxHeight="90%",t.style.borderRadius="8px",t.style.boxShadow="0 4px 20px rgba(0,0,0,0.5)",t.style.transition="transform 0.3s ease",e.appendChild(t),document.body.appendChild(e);let s=!1;i.querySelectorAll("img").forEach(n=>{n.style.cursor="zoom-in",n.addEventListener("click",()=>{t.src=n.src,e.style.opacity="1",e.style.pointerEvents="auto",s=!0})}),e.addEventListener("click",()=>{e.style.opacity="0",e.style.pointerEvents="none",s=!1}),document.addEventListener("keydown",t=>{s&&t.key==="Escape"&&(e.style.opacity="0",e.style.pointerEvents="none",s=!1)})});const e=document.querySelector(".mobile-search-btn"),t=document.querySelector(".cancel-btn");e.addEventListener("click",()=>{const e=document.querySelector(".mobile-search-layout");e.classList.toggle("show")}),t.addEventListener("click",()=>{const e=document.querySelector(".mobile-search-layout");e.classList.toggle("show")});async function n(){const o=await fetch("/index.json"),i=await o.json(),n=window.innerWidth,a=new Fuse(i,{keys:["title","tags","description"],threshold:.3}),s=document.getElementById(n<=849?"mobile-search-input":"search-input"),e=document.querySelector(".search-results-wrapper"),t=document.querySelector(n<=849?".mobile-search-results-list":".search-results-list");s.addEventListener("input",()=>{const n=s.value.trim();if(t.innerHTML="",!n){e.classList.remove("has-results"),e.classList.add("hidden");return}const o=a.search(n);o.length>0?(e.classList.remove("hidden"),e.classList.add("has-results"),o.forEach(({item:e})=>{const n=document.createElement("article");n.className="search-result-item",n.innerHTML=`
                    <a href="${e.permalink}">
                        <h2>${e.title}</h2>
                    </a>
                    <div class="post-meta">
                        <i class="fa-regular fa-calendar"></i> ${e.date} <div>•</div> 
        <i class="fa-regular fa-clock"></i> ${e.readingTime} <div>•</div> 
        <i class="fa-solid fa-tags"></i> ${e.tags.join(", ")}
                    </div>
                    <p>${e.description||""}</p>
                `,t.appendChild(n)})):(e.classList.remove("hidden"),e.classList.add("has-results"),t.innerHTML=`
                <div class="not-found">
                    <p>Oops. No results found.</p>
                </div>
            `)})}n()})()