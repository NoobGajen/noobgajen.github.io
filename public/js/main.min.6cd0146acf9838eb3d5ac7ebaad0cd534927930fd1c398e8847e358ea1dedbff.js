(()=>{document.addEventListener("DOMContentLoaded",function(){const o=document.querySelector(".sidebar"),a=document.querySelector(".mobile-menu-btn"),r=document.querySelector(".mobile-close-btn");a.addEventListener("click",()=>{o.classList.toggle("mobile-open")}),r.addEventListener("click",()=>{o.classList.toggle("mobile-open")});const c=document.getElementById("post-content"),l=document.querySelector(".post-single");l&&(c.style.display="block");const n=document.getElementById("scrollToTop");if(!n)return;window.addEventListener("scroll",()=>{window.scrollY>300?n.classList.add("show"):n.classList.remove("show")}),n.addEventListener("click",()=>{window.scrollTo({top:0,behavior:"smooth"})});const i=document.querySelector(".post-single .post-content");if(!i)return;const e=document.createElement("div");e.style.position="fixed",e.style.top=0,e.style.left=0,e.style.width="100%",e.style.height="100%",e.style.backgroundColor="rgba(0, 0, 0, 0.8)",e.style.display="flex",e.style.justifyContent="center",e.style.alignItems="center",e.style.cursor="zoom-out",e.style.zIndex="9999",e.style.transition="opacity 0.25s ease",e.style.opacity="0",e.style.pointerEvents="none";const t=document.createElement("img");t.style.maxWidth="90%",t.style.maxHeight="90%",t.style.borderRadius="8px",t.style.boxShadow="0 4px 20px rgba(0,0,0,0.5)",t.style.transition="transform 0.3s ease",e.appendChild(t),document.body.appendChild(e);let s=!1;i.querySelectorAll("img").forEach(n=>{n.style.cursor="zoom-in",n.addEventListener("click",()=>{t.src=n.src,e.style.opacity="1",e.style.pointerEvents="auto",s=!0})}),e.addEventListener("click",()=>{e.style.opacity="0",e.style.pointerEvents="none",s=!1}),document.addEventListener("keydown",t=>{s&&t.key==="Escape"&&(e.style.opacity="0",e.style.pointerEvents="none",s=!1)})});const e=document.querySelector(".mobile-search-btn"),t=document.querySelector(".cancel-btn");e.addEventListener("click",()=>{const e=document.querySelector(".mobile-search-layout");e.classList.toggle("show")}),t.addEventListener("click",()=>{const e=document.querySelector(".mobile-search-layout");e.classList.toggle("show")});async function n(){const e=await fetch("/index.json"),t=await e.json(),o=window.innerWidth,n=new Fuse(t,{keys:["title","tags","description"],threshold:.3}),s=["search-input","mobile-search-input"];s.forEach(e=>{const s=document.getElementById(e);if(!s)return;const i=document.querySelector(".search-results-wrapper"),a=document.querySelector(e==="mobile-search-input"?".mobile-search-results-list":".search-results-list"),o=e==="mobile-search-input"?document.querySelector(".mobile-search-results-list"):document.querySelector(".search-results-list"),t=e==="mobile-search-input"?document.querySelector(".mobile-search-layout"):document.querySelector(".search-results-wrapper");s.addEventListener("input",()=>{const i=s.value.trim();if(o.innerHTML="",e==="mobile-search-input");else if(!i){t.classList.remove("has-results"),t.classList.add("hidden");return}if(!i)return;const a=n.search(i);a.length>0?(e!=="mobile-search-input"&&(t.classList.remove("hidden"),t.classList.add("has-results")),a.forEach(({item:e})=>{const t=document.createElement("article");t.className="search-result-item",t.innerHTML=`
                        <a href="${e.permalink}">
                            <h2>${e.title}</h2>
                        </a>
                        <div class="post-meta">
                            <i class="fa-regular fa-calendar"></i> ${e.date} <div>•</div> 
            <i class="fa-regular fa-clock"></i> ${e.readingTime} <div>•</div> 
            <i class="fa-solid fa-tags"></i> ${e.tags.join(", ")}
                        </div>
                        <p>${e.description||""}</p>
                    `,o.appendChild(t)})):(e!=="mobile-search-input"&&(t.classList.remove("hidden"),t.classList.add("has-results")),o.innerHTML=`
                    <div class="not-found">
                        <p>Oops. No results found.</p>
                    </div>
                `)})})}n()})()